<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–∞—Ç—É—Ç–Ω—ã–π –ü–∞—Ä–∫ "–ö–æ—Å–º–æ—Å"</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom CSS for neon glow effects and background image */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d0a1f; /* Very dark blue/purple for cosmic feel */
            color: #e0e0e0; /* Light gray for general text */
            background-image: url('img/logo.jpeg'); /* Placeholder for your background image */
            background-size: cover;
            background-position: center top;
            background-repeat: no-repeat;
            background-attachment: fixed; /* Keeps background fixed when scrolling */
            overflow-x: hidden; /* Prevent horizontal scroll due to cubes */
        }

        /* Neon text shadow for headings */
        .neon-text-glow {
            text-shadow: 0 0 5px #f0abfc, 0 0 10px #f0abfc, 0 0 15px #f0abfc, 0 0 20px #a78bfa, 0 0 30px #a78bfa;
        }

        /* Neon box shadow for cards/sections */
        .neon-box-glow {
            box-shadow: 0 0 10px rgba(240, 171, 252, 0.6), 0 0 20px rgba(167, 139, 250, 0.4);
        }

        /* Active tab button style */
        .tab-button.active {
            background-color: #a78bfa; /* Brighter purple for active tab */
            Best color: purple;
            box-shadow: 0 0 15px #a78bfa, 0 0 25px #a78bfa; /* Stronger glow */
        }

        /* Input field adjustments for dark theme */
        input[type="date"],
        input[type="number"],
        input[type="text"],
        input[type="tel"],
        select {
            background-color: #2a214d; /* Darker input background */
            border-color: #6d28d9; /* Purple border */
            color: #e0e0e0; /* Light text color */
        }
        input[type="date"]::-webkit-calendar-picker-indicator {
            filter: invert(1); /* Ensures calendar icon is visible */
        }
        input:focus, select:focus {
            border-color: #c084fc; /* Lighter purple on focus */
            ring-color: #c084fc;
        }

        /* Placeholder text color */
        input::placeholder {
            color: #a78bfa; /* Light purple placeholder */
            opacity: 0.7;
        }

        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1a1438; /* Darker track */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #6d28d9; /* Purple thumb */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #8b5cf6; /* Lighter purple on hover */
        }

        /* Cube animation */
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; transform: scale(0.8); }
            50% { opacity: 0.8; transform: scale(1.2); }
        }

        .cube {
            position: absolute;
            border-radius: 2px; /* Slightly rounded corners for cubes */
            opacity: 0; /* Start hidden */
            animation: twinkle 3s infinite ease-in-out; /* Twinkling effect */
            pointer-events: none; /* Allow clicks to pass through */
        }

        /* Bot specific styles from style.css */
        .bot-container {
            max-width: 600px;
            margin: auto;
            background: white; /* This will be overridden by the main content div's gradient background */
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1); /* This will be overridden by neon-box-glow */
            color: #333; /* This will be overridden by the main content div's text color */
            margin-bottom: 20px; /* Add some space below the bot options */
        }
        .bot-container h1 {
            text-align: center;
            color: #4a90e2; /* This will be overridden by the main content div's text color and neon glow */
            margin-bottom: 20px;
        }
        .bot-container ul {
            list-style-type: none;
            padding: 0;
        }
        .bot-container li {
            background: #f0f0f0; /* This will be overridden by the main content div's background */
            margin: 10px 0;
            padding: 12px;
            border-radius: 5px;
            cursor: pointer; /* Indicate clickable items */
            transition: background-color 0.3s ease;
        }
        .bot-container li:hover {
            background-color: #e0e0e0; /* Darker hover for light background. Will be adjusted for dark. */
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center p-4 sm:p-6 lg:p-8">

    <div id="cubes-container" class="fixed inset-0 overflow-hidden z-0"></div>

    <div class="bg-gradient-to-br from-[#1a1438] to-[#0d0a1f] rounded-xl shadow-lg p-6 sm:p-8 lg:p-10 w-full max-w-4xl border border-purple-700 neon-box-glow z-10 relative">
        <h1 class="text-3xl sm:text-4xl font-bold text-center text-fuchsia-500 mb-6 sm:mb-8">
            <img src="img/logo.jpeg"
                 alt="–ë–∞—Ç—É—Ç–Ω—ã–π –ü–∞—Ä–∫ –ö–æ—Å–º–æ—Å –õ–æ–≥–æ—Ç–∏–ø"
                 class="mx-auto w-full max-w-md h-auto object-contain neon-box-glow"
                 onerror="this.onerror=null;this.src='https://placehold.co/300x100/0d0a1f/fuchsia?text=–õ–æ–≥–æ—Ç–∏–ø+–Ω–µ+–Ω–∞–π–¥–µ–Ω';">
        </h1>

     <div id="bot-menu-section" class="w-full max-w-4xl mt-10 mb-10 neon-box-glow">
    <h2 class="text-2xl font-semibold text-fuchsia-500 mb-5 neon-text-glow">–ü—Ä–∏–≤–µ—Ç, —è –±–æ—Ç –±–∞—Ç—É—Ç–Ω–æ–≥–æ –ø–∞—Ä–∫–∞ ¬´–ö–æ—Å–º–æ—Å¬ª ü§∏‚Äç‚ôÇÔ∏è</h2>
    <ul class="grid grid-cols-1 md:grid-cols-2 gap-3">
        <li id="bot-option-1" class="bg-[#1a1438] hover:bg-[#2a214d] border border-purple-700 p-3 rounded-lg cursor-pointer transition duration-200 neon-box-glow">1Ô∏è‚É£ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è</li>
        <li id="bot-option-2" class="bg-[#1a1438] hover:bg-[#2a214d] border border-purple-700 p-3 rounded-lg cursor-pointer transition duration-200 neon-box-glow">2Ô∏è‚É£ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ü–µ–Ω—ã –∏ –∞–∫—Ü–∏–∏</li>
        <li id="bot-option-3" class="bg-[#1a1438] hover:bg-[#2a214d] border border-purple-700 p-3 rounded-lg cursor-pointer transition duration-200 neon-box-glow">3Ô∏è‚É£ –ö–∞–∫ –¥–æ–±—Ä–∞—Ç—å—Å—è</li>
        <li id="bot-option-4" class="bg-[#1a1438] hover:bg-[#2a214d] border border-purple-700 p-3 rounded-lg cursor-pointer transition duration-200 neon-box-glow">4Ô∏è‚É£ –ê–Ω–µ–∫–¥–æ—Ç –¥–Ω—è</li>
        <li id="bot-option-5" class="bg-[#1a1438] hover:bg-[#2a214d] border border-purple-700 p-3 rounded-lg cursor-pointer transition duration-200 neon-box-glow">5Ô∏è‚É£ –§–∞–∫—Ç –∏–ª–∏ —Ç—Ä—é–∫</li>
        <li id="bot-option-6" class="bg-[#1a1438] hover:bg-[#2a214d] border border-purple-700 p-3 rounded-lg cursor-pointer transition duration-200 neon-box-glow">6Ô∏è‚É£ –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞</li>
        <li id="bot-option-7" class="bg-[#1a1438] hover:bg-[#2a214d] border border-purple-700 p-3 rounded-lg cursor-pointer transition duration-200 neon-box-glow">7Ô∏è‚É£ –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ —Å –ø—Ä–∏–∑–æ–º üéÅ</li>
        <li id="bot-option-8" class="bg-[#1a1438] hover:bg-[#2a214d] border border-purple-700 p-3 rounded-lg cursor-pointer transition duration-200 neon-box-glow">8Ô∏è‚É£ –ù–∞–ø–∏—Å–∞—Ç—å –∞–¥–º–∏–Ω—É</li>
        <li id="bot-option-9" class="bg-[#1a1438] hover:bg-[#2a214d] border border-purple-700 p-3 rounded-lg cursor-pointer transition duration-200 neon-box-glow">9Ô∏è‚É£ –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ ‚úçÔ∏è</li>
    </ul>
</div>
        <div class="flex flex-col sm:flex-row justify-center gap-3 mb-8">
            <button id="tab-regular" class="tab-button active px-6 py-3 rounded-lg font-semibold text-lg transition duration-300 ease-in-out bg-purple-700 hover:bg-purple-800 text-white shadow-md">
                –†–∞–∑–æ–≤–æ–µ –ø–æ—Å–µ—â–µ–Ω–∏–µ
            </button>
            <button id="tab-birthday" class="tab-button px-6 py-3 rounded-lg font-semibold text-lg transition duration-300 ease-in-out bg-gray-700 hover:bg-gray-600 text-gray-200">
                –î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è
            </button>
            <button id="tab-group" class="tab-button px-6 py-3 rounded-lg font-semibold text-lg transition duration-300 ease-in-out bg-gray-700 hover:bg-gray-600 text-gray-200">
                –ì—Ä—É–ø–ø–æ–≤—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
            </button>
        </div>

        <div id="regular-booking" class="booking-section">
            <h2 class="text-2xl font-semibold text-cyan-400 mb-5 neon-text-glow">–†–∞–∑–æ–≤–æ–µ –ø–æ—Å–µ—â–µ–Ω–∏–µ</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="flex flex-col md:col-span-2">
                    <label for="regular-name" class="block text-fuchsia-300 font-medium mb-2">–ò–º—è:</label>
                    <input type="text" id="regular-name" class="p-3 border rounded-lg focus:ring-purple-500 focus:border-purple-500" required>
                </div>
                <div class="flex flex-col md:col-span-2">
                    <label for="regular-phone" class="block text-fuchsia-300 font-medium mb-2">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (+7):</label>
                    <input type="tel" id="regular-phone" class="p-3 border rounded-lg focus:ring-purple-500 focus:border-purple-500" pattern="^\+7[0-9]{10}$" placeholder="+7XXXXXXXXXX" required>
                </div>

                <div class="flex flex-col">
                    <label for="regular-date" class="block text-fuchsia-300 font-medium mb-2">–î–∞—Ç–∞:</label>
                    <input type="date" id="regular-date" class="p-3 border rounded-lg focus:ring-purple-500 focus:border-purple-500">
                </div>

                <div class="flex flex-col">
                    <label class="block text-fuchsia-300 font-medium mb-2">–ö–æ–ª-–≤–æ —á–µ–ª–æ–≤–µ–∫ (1-20):</label>
                    <div class="flex items-center space-x-3">
                        <button id="regular-minus" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg text-xl transition duration-200 ease-in-out shadow-sm neon-box-glow">-</button>
                        <input type="number" id="regular-people" value="1" min="1" max="20" class="w-20 text-center p-2 border rounded-lg focus:ring-purple-500 focus:border-purple-500">
                        <button id="regular-plus" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg text-xl transition duration-200 ease-in-out shadow-sm neon-box-glow">+</button>
                    </div>
                </div>

                <div class="flex flex-col md:col-span-2">
                    <label class="block text-fuchsia-300 font-medium mb-2">–í—Ä–µ–º—è:</label>
                    <div class="flex flex-wrap gap-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="regular-duration" value="30" class="form-radio h-5 w-5 text-cyan-400" checked>
                            <span class="ml-2 text-gray-100">30 –º–∏–Ω—É—Ç</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="regular-duration" value="60" class="form-radio h-5 w-5 text-cyan-400">
                            <span class="ml-2 text-gray-100">60 –º–∏–Ω—É—Ç</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="regular-duration" value="120" class="form-radio h-5 w-5 text-cyan-400">
                            <span class="ml-2 text-gray-100">120 –º–∏–Ω—É—Ç</span>
                        </label>
                    </div>
                </div>

                <div class="flex flex-col md:col-span-2">
                    <label class="block text-fuchsia-300 font-medium mb-2">–î–æ—Å—Ç—É–ø–Ω–æ–µ –≤—Ä–µ–º—è:</label>
                    <select id="regular-time-slot" class="p-3 border rounded-lg focus:ring-purple-500 focus:border-purple-500">
                        </select>
                    <p id="regular-availability-message" class="text-sm text-red-400 mt-2 hidden"></p>
                </div>

                <div class="md:col-span-2 text-center mt-6">
                    <p class="text-xl font-semibold text-gray-100">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: <span id="regular-total-price" class="text-cyan-400 text-2xl neon-text-glow">0</span> ‚ÇΩ</p>
                    <button id="book-regular" class="mt-6 bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-8 rounded-lg text-xl transition duration-300 ease-in-out shadow-lg neon-box-glow" disabled>
                        –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å
                    </button>
                </div>
            </div>
        </div>

        <div id="birthday-booking" class="booking-section hidden">
            <h2 class="text-2xl font-semibold text-cyan-400 mb-5 neon-text-glow">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ "–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è"</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="flex flex-col md:col-span-2">
                    <label for="birthday-name" class="block text-fuchsia-300 font-medium mb-2">–ò–º—è:</label>
                    <input type="text" id="birthday-name" class="p-3 border rounded-lg focus:ring-purple-500 focus:border-purple-500" required>
                </div>
                <div class="flex flex-col md:col-span-2">
                    <label for="birthday-phone" class="block text-fuchsia-300 font-medium mb-2">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (+7):</label>
                    <input type="tel" id="birthday-phone" class="p-3 border rounded-lg focus:ring-purple-500 focus:border-purple-500" pattern="^\+7[0-9]{10}$" placeholder="+7XXXXXXXXXX" required>
                </div>

                <div class="flex flex-col">
                    <label for="birthday-date" class="block text-fuchsia-300 font-medium mb-2">–î–∞—Ç–∞:</label>
                    <input type="date" id="birthday-date" class="p-3 border rounded-lg focus:ring-purple-500 focus:border-purple-500">
                </div>

                <div class="flex flex-col">
                    <label class="block text-fuchsia-300 font-medium mb-2">–ö–æ–ª-–≤–æ —á–µ–ª–æ–≤–µ–∫ (1-20):</label>
                    <div class="flex items-center space-x-3">
                        <button id="birthday-minus" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg text-xl transition duration-200 ease-in-out shadow-sm neon-box-glow">-</button>
                        <input type="number" id="birthday-people" value="1" min="1" max="20" class="w-20 text-center p-2 border rounded-lg focus:ring-purple-500 focus:border-purple-500">
                        <button id="birthday-plus" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg text-xl transition duration-200 ease-in-out shadow-sm neon-box-glow">+</button>
                    </div>
                </div>

                <div class="flex flex-col">
                    <label class="block text-fuchsia-300 font-medium mb-2">–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞:</label>
                    <div class="flex items-center space-x-2">
                        <input type="number" id="birthday-start-hour" value="10" min="9" max="21" class="w-16 text-center p-2 border rounded-lg focus:ring-purple-500 focus:border-purple-500">
                        <span class="text-xl text-gray-100">:</span>
                        <input type="number" id="birthday-start-minute" value="00" min="0" max="59" step="30" class="w-16 text-center p-2 border rounded-lg focus:ring-purple-500 focus:border-purple-500">
                    </div>
                </div>

                <div class="flex flex-col">
                    <label class="block text-fuchsia-300 font-medium mb-2">–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è:</label>
                    <div class="flex items-center space-x-2">
                        <input type="number" id="birthday-end-hour" value="12" min="9" max="22" class="w-16 text-center p-2 border rounded-lg focus:ring-purple-500 focus:border-purple-500">
                        <span class="text-xl text-gray-100">:</span>
                        <input type="number" id="birthday-end-minute" value="00" min="0" max="59" step="30" class="w-16 text-center p-2 border rounded-lg focus:ring-purple-500 focus:border-purple-500">
                    </div>
                </div>
                <p id="birthday-duration-message" class="text-sm text-red-400 mt-2 hidden md:col-span-2"></p>
                <p id="birthday-availability-message" class="text-sm text-red-400 mt-2 hidden md:col-span-2"></p>


                <div class="md:col-span-2 text-center mt-6">
                    <p class="text-xl font-semibold text-gray-100">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: <span id="birthday-total-price" class="text-cyan-400 text-2xl neon-text-glow">0</span> ‚ÇΩ</p>
                    <button id="book-birthday" class="mt-6 bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-8 rounded-lg text-xl transition duration-300 ease-in-out shadow-lg neon-box-glow" disabled>
                        –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –î–µ–Ω—å –†–æ–∂–¥–µ–Ω–∏—è
                    </button>
                </div>
            </div>
        </div>

        <div id="group-booking" class="booking-section hidden">
            <h2 class="text-2xl font-semibold text-cyan-400 mb-5 neon-text-glow">–ì—Ä—É–ø–ø–æ–≤—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–æ—Ç 15 —á–µ–ª)</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="flex flex-col md:col-span-2">
                    <label for="group-name" class="block text-fuchsia-300 font-medium mb-2">–ò–º—è:</label>
                    <input type="text" id="group-name" class="p-3 border rounded-lg focus:ring-purple-500 focus:border-purple-500" required>
                </div>
                <div class="flex flex-col md:col-span-2">
                    <label for="group-phone" class="block text-fuchsia-300 font-medium mb-2">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (+7):</label>
                    <input type="tel" id="group-phone" class="p-3 border rounded-lg focus:ring-purple-500 focus:border-purple-500" pattern="^\+7[0-9]{10}$" placeholder="+7XXXXXXXXXX" required>
                </div>

                <div class="flex flex-col">
                    <label for="group-date" class="block text-fuchsia-300 font-medium mb-2">–î–∞—Ç–∞:</label>
                    <input type="date" id="group-date" class="p-3 border rounded-lg focus:ring-purple-500 focus:border-purple-500">
                </div>

                <div class="flex flex-col">
                    <label class="block text-fuchsia-300 font-medium mb-2">–ö–æ–ª-–≤–æ —á–µ–ª–æ–≤–µ–∫ (–æ—Ç 15):</label>
                    <div class="flex items-center space-x-3">
                        <button id="group-minus" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg text-xl transition duration-200 ease-in-out shadow-sm neon-box-glow">-</button>
                        <input type="number" id="group-people" value="15" min="15" max="100" class="w-20 text-center p-2 border rounded-lg focus:ring-purple-500 focus:border-purple-500">
                        <button id="group-plus" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg text-xl transition duration-200 ease-in-out shadow-sm neon-box-glow">+</button>
                    </div>
                </div>

                <div class="flex flex-col md:col-span-2">
                    <label class="block text-fuchsia-300 font-medium mb-2">–î–æ—Å—Ç—É–ø–Ω–æ–µ –≤—Ä–µ–º—è (1 —á–∞—Å):</label>
                    <select id="group-time-slot" class="p-3 border rounded-lg focus:ring-purple-500 focus:border-purple-500">
                        </select>
                    <p id="group-availability-message" class="text-sm text-red-400 mt-2 hidden"></p>
                </div>

                <div class="md:col-span-2 text-center mt-6">
                    <p class="text-xl font-semibold text-gray-100">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: <span id="group-total-price" class="text-cyan-400 text-2xl neon-text-glow">0</span> ‚ÇΩ</p>
                    <button id="book-group" class="mt-6 bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-8 rounded-lg text-xl transition duration-300 ease-in-out shadow-lg neon-box-glow" disabled>
                        –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É
                    </button>
                </div>
            </div>
        </div>

        <div id="message-box" class="fixed inset-0 bg-gray-900 bg-opacity-70 flex items-center justify-center p-4 hidden z-50">
            <div class="bg-gradient-to-br from-[#1a1438] to-[#0d0a1f] rounded-lg shadow-xl p-6 w-full max-w-sm text-center border border-purple-700 neon-box-glow">
                <p id="message-text" class="text-lg font-medium text-gray-100 mb-4"></p>
                <button id="message-ok-button" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-6 rounded-lg transition duration-200 ease-in-out neon-box-glow">–û–ö</button>
            </div>
        </div>

    </div>

    <script>
        // --- DOM Elements ---
        const tabButtons = document.querySelectorAll('.tab-button');
        const bookingSections = document.querySelectorAll('.booking-section');

        // Regular Booking Elements
        const regularNameInput = document.getElementById('regular-name');
        const regularPhoneInput = document.getElementById('regular-phone');
        const regularDateInput = document.getElementById('regular-date');
        const regularPeopleInput = document.getElementById('regular-people');
        const regularMinusBtn = document.getElementById('regular-minus');
        const regularPlusBtn = document.getElementById('regular-plus');
        const regularDurationRadios = document.querySelectorAll('input[name="regular-duration"]');
        const regularTimeSlotSelect = document.getElementById('regular-time-slot');
        const regularAvailabilityMessage = document.getElementById('regular-availability-message');
        const regularTotalPriceSpan = document.getElementById('regular-total-price');
        const bookRegularBtn = document.getElementById('book-regular');

        // Birthday Booking Elements
        const birthdayNameInput = document.getElementById('birthday-name');
        const birthdayPhoneInput = document.getElementById('birthday-phone');
        const birthdayDateInput = document.getElementById('birthday-date');
        const birthdayPeopleInput = document.getElementById('birthday-people');
        const birthdayMinusBtn = document.getElementById('birthday-minus');
        const birthdayPlusBtn = document.getElementById('birthday-plus');
        const birthdayStartHourInput = document.getElementById('birthday-start-hour');
        const birthdayStartMinuteInput = document.getElementById('birthday-start-minute');
        const birthdayEndHourInput = document.getElementById('birthday-end-hour');
        const birthdayEndMinuteInput = document.getElementById('birthday-end-minute');
        const birthdayDurationMessage = document.getElementById('birthday-duration-message');
        const birthdayAvailabilityMessage = document.getElementById('birthday-availability-message');
        const birthdayTotalPriceSpan = document.getElementById('birthday-total-price');
        const bookBirthdayBtn = document.getElementById('book-birthday');

        // Group Booking Elements
        const groupNameInput = document.getElementById('group-name');
        const groupPhoneInput = document.getElementById('group-phone');
        const groupDateInput = document.getElementById('group-date');
        const groupPeopleInput = document.getElementById('group-people');
        const groupMinusBtn = document.getElementById('group-minus');
        const groupPlusBtn = document.getElementById('group-plus');
        const groupTimeSlotSelect = document.getElementById('group-time-slot');
        const groupAvailabilityMessage = document.getElementById('group-availability-message');
        const groupTotalPriceSpan = document.getElementById('group-total-price');
        const bookGroupBtn = document.getElementById('book-group');

        // Message Box Elements
        const messageBox = document.getElementById('message-box');
        const messageText = document.getElementById('message-text');
        const messageOkButton = document.getElementById('message-ok-button');

        // Cubes Container Element
        const cubesContainer = document.getElementById('cubes-container');

        // Bot Menu Elements
        const botMenuSection = document.getElementById('bot-menu-section');
        const botOption1 = document.getElementById('bot-option-1');
        const botOption2 = document.getElementById('bot-option-2');
        const botOption3 = document.getElementById('bot-option-3');
        const botOption4 = document.getElementById('bot-option-4');
        const botOption5 = document.getElementById('bot-option-5');
        const botOption6 = document.getElementById('bot-option-6');
        const botOption7 = document.getElementById('bot-option-7');
        const botOption8 = document.getElementById('bot-option-8');
        const botOption9 = document.getElementById('bot-option-9');


        // --- Telegram Bot Configuration ---
        const botToken = '7861899004:AAHHUEAolQwwsSXkz7YLddd_qnnxesQIj24';
        const chatId = '465087814'; // Replace with your actual chat ID

        // --- Global State ---
        // Stores booked slots. In a real app, this would be fetched from a backend.
        // Structure: { date: 'YYYY-MM-DD', startHour: H, startMinute: M, durationMinutes: D, people: N, type: 'regular' | 'birthday' | 'group', name: 'N', phone: 'P' }
        let bookedSlots = [];

        // Define holidays for price calculation (example for 2025)
        const holidays = [
            '2025-01-01', // –ù–æ–≤—ã–π –≥–æ–¥
            '2025-01-07', // –†–æ–∂–¥–µ—Å—Ç–≤–æ
            '2025-02-23', // –î–µ–Ω—å –∑–∞—â–∏—Ç–Ω–∏–∫–∞ –û—Ç–µ—á–µ—Å—Ç–≤–∞
            '2025-03-08', // –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π –∂–µ–Ω—Å–∫–∏–π –¥–µ–Ω—å
            '2025-05-01', // –ü—Ä–∞–∑–¥–Ω–∏–∫ –í–µ—Å–Ω—ã –∏ –¢—Ä—É–¥–∞
            '2025-05-09', // –î–µ–Ω—å –ü–æ–±–µ–¥—ã
            '2025-06-12', // –î–µ–Ω—å –†–æ—Å—Å–∏–∏
            '2025-11-04'  // –î–µ–Ω—å –Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –µ–¥–∏–Ω—Å—Ç–≤–∞
        ];

        const CAPACITY_PER_SLOT = 12; // Max people per 30-min segment for regular bookings

        // --- Utility Functions ---

        /**
         * Displays a custom message box.
         * @param {string} message - The message to display.
         */
        function showMessageBox(message) {
            messageText.textContent = message;
            messageBox.classList.remove('hidden');
        }

        /**
         * Hides the custom message box.
         */
        function hideMessageBox() {
            messageBox.classList.add('hidden');
        }

        /**
         * Formats a number to always have two digits (e.g., 5 -> "05").
         * @param {number} num - The number to format.
         * @returns {string} The formatted string.
         */
        function formatTime(num) {
            return num < 10 ? '0' + num : '' + num;
        }

        /**
         * Sends a message to the configured Telegram chat.
         * @param {string} message - The text message to send.
         */
        async function sendTelegramMessage(message) {
            const url = `https://api.telegram.org/bot${botToken}/sendMessage`;
            const params = {
                chat_id: chatId,
                text: message,
                parse_mode: 'HTML' // Use HTML for basic formatting like bold
            };

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(params)
                });

                const data = await response.json();
                if (!data.ok) {
                    console.error('Error sending Telegram message:', data.description);
                }
            } catch (error) {
                console.error('Network error while sending Telegram message:', error);
            }
        }

        /**
         * Calculates the day type (weekday, weekend, holiday) for pricing.
         * @param {string} dateString - Date in 'YYYY-MM-DD' format.
         * @returns {'monday_thursday' | 'other_weekday' | 'weekend_holiday'}
         */
        function getDayType(dateString) {
            const date = new Date(dateString + 'T00:00:00'); // Add T00:00:00 to avoid timezone issues
            const dayOfWeek = date.getDay(); // 0 for Sunday, 1 for Monday, ..., 6 for Saturday

            if (holidays.includes(dateString)) {
                return 'weekend_holiday';
            }
            if (dayOfWeek === 0 || dayOfWeek === 6) { // Sunday or Saturday
                return 'weekend_holiday';
            }
            if (dayOfWeek === 1 || dayOfWeek === 4) { // Monday or Thursday
                return 'monday_thursday';
            }
            return 'other_weekday'; // Tuesday, Wednesday, Friday
        }

        /**
         * Calculates the base price per person for a given duration and day type.
         * @param {number} durationMinutes - Duration in minutes (30, 60, 120).
         * @param {'monday_thursday' | 'other_weekday' | 'weekend_holiday'} dayType - Type of day.
         * @returns {number} Price per person.
         */
        function getBasePrice(durationMinutes, dayType) {
            if (dayType === 'monday_thursday') {
                if (durationMinutes === 30) return 300;
                if (durationMinutes === 60) return 350;
                if (durationMinutes === 120) return 700;
            } else if (dayType === 'other_weekday') {
                if (durationMinutes === 30) return 300;
                if (durationMinutes === 60) return 500;
                if (durationMinutes === 120) return 800;
            } else if (dayType === 'weekend_holiday') {
                if (durationMinutes === 30) return 400;
                if (durationMinutes === 60) return 600;
                if (durationMinutes === 120) return 1000;
            }
            return 0; // Should not happen
        }

        /**
         * Populates the time slot dropdown for regular and group bookings.
         * @param {HTMLSelectElement} selectElement - The select element to populate.
         * @param {string} dateString - The selected date.
         * @param {number} durationMinutes - The selected duration (e.g., 60 for 1 hour).
         * @param {number} numPeople - The number of people for the booking.
         * @param {string} bookingType - 'regular' or 'group'.
         */
        function populateTimeSlots(selectElement, dateString, durationMinutes, numPeople, bookingType) {
            selectElement.innerHTML = ''; // Clear previous options
            const now = new Date();
            const todayString = now.toISOString().split('T')[0];
            const currentHour = now.getHours();
            const currentMinute = now.getMinutes();

            let hasAvailableSlots = false;

            for (let hour = 9; hour < 22; hour++) { // Park operating hours: 9:00 to 21:00 (last booking starts at 21:00 for 60 min, ends 22:00)
                for (let minute = 0; minute < 60; minute += 30) {
                    const slotStartHour = hour;
                    const slotStartMinute = minute;
                    const slotEndHour = hour + Math.floor((minute + durationMinutes) / 60);
                    const slotEndMinute = (minute + durationMinutes) % 60;

                    // Ensure the slot ends within operating hours (e.g., before 22:00)
                    if (slotEndHour > 22 || (slotEndHour === 22 && slotEndMinute > 0)) {
                        continue;
                    }

                    // Don't show past slots for today
                    if (dateString === todayString &&
                        (slotStartHour < currentHour || (slotStartHour === currentHour && slotStartMinute <= currentMinute))) {
                        continue;
                    }

                    const slotStartTime = `${formatTime(slotStartHour)}:${formatTime(slotStartMinute)}`;
                    const slotEndTime = `${formatTime(slotEndHour)}:${formatTime(slotEndMinute)}`;

                    // Check availability for this specific slot
                    const isAvailable = checkAvailability(dateString, slotStartHour, slotStartMinute, durationMinutes, numPeople, bookingType);

                    const option = document.createElement('option');
                    option.value = `${slotStartHour}:${slotStartMinute}`;
                    option.textContent = `${slotStartTime} - ${slotEndTime}`;

                    if (!isAvailable) {
                        option.disabled = true;
                        option.textContent += " (–ó–∞–Ω—è—Ç–æ)";
                        option.classList.add('text-gray-400', 'italic');
                    } else {
                        hasAvailableSlots = true;
                    }
                    selectElement.appendChild(option);
                }
            }

            if (!hasAvailableSlots && selectElement.options.length > 0) {
                const noSlotsOption = document.createElement('option');
                noSlotsOption.textContent = "–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –¥–∞—Ç—É –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.";
                noSlotsOption.disabled = true;
                selectElement.insertBefore(noSlotsOption, selectElement.firstChild);
                selectElement.value = '';
            } else if (selectElement.options.length === 0) {
                const noSlotsOption = document.createElement('option');
                noSlotsOption.textContent = "–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤.";
                noSlotsOption.disabled = true;
                selectElement.appendChild(noSlotsOption);
                selectElement.value = '';
            } else {
                const firstAvailable = Array.from(selectElement.options).find(opt => !opt.disabled);
                if (firstAvailable) {
                    selectElement.value = firstAvailable.value;
                } else {
                    selectElement.value = '';
                }
            }
        }


        /**
         * Checks if a given time slot is available for a new booking.
         * Capacity is 12 people per 30-minute segment for regular bookings.
         * Birthday and Group bookings are considered exclusive for their duration.
         * @param {string} dateString - Date in 'YYYY-MM-DD' format.
         * @param {number} startHour - Start hour of the new booking.
         * @param {number} startMinute - Start minute of the new booking.
         * @param {number} durationMinutes - Duration of the new booking.
         * @param {number} newPeople - Number of people for the new booking.
         * @param {string} bookingType - 'regular' | 'birthday' | 'group'.
         * @returns {boolean} True if available, false otherwise.
         */
        function checkAvailability(dateString, startHour, startMinute, durationMinutes, newPeople, bookingType) {
            const newBookingStart = new Date(`${dateString}T${formatTime(startHour)}:${formatTime(startMinute)}:00`);
            const newBookingEnd = new Date(newBookingStart.getTime() + durationMinutes * 60 * 1000);

            for (const existingSlot of bookedSlots) {
                if (existingSlot.date !== dateString) continue;

                const existingStart = new Date(`${existingSlot.date}T${formatTime(existingSlot.startHour)}:${formatTime(existingSlot.startMinute)}:00`);
                const existingEnd = new Date(existingStart.getTime() + existingSlot.durationMinutes * 60 * 1000);

                // Check for any overlap between new and existing bookings
                if (newBookingStart < existingEnd && newBookingEnd > existingStart) {
                    // If the existing booking is an exclusive type (birthday or group)
                    if (existingSlot.type === 'birthday' || existingSlot.type === 'group') {
                        return false; // Any new booking (regular, birthday, group) cannot overlap with an exclusive one
                    }

                    // If the new booking is an exclusive type (birthday or group)
                    if (bookingType === 'birthday' || bookingType === 'group') {
                        return false; // An exclusive new booking cannot overlap with any existing booking (even regular)
                    }

                    // If both are regular bookings, check capacity
                    if (bookingType === 'regular' && existingSlot.type === 'regular') {
                        // Calculate total people in overlapping 30-min segments
                        let currentSegmentStart = new Date(Math.max(newBookingStart.getTime(), existingStart.getTime()));
                        const overlapEnd = new Date(Math.min(newBookingEnd.getTime(), existingEnd.getTime()));

                        while (currentSegmentStart < overlapEnd) {
                            const segmentEnd = new Date(currentSegmentStart.getTime() + 30 * 60 * 1000);
                            let peopleInThis30MinSlot = existingSlot.people; // Start with people from the current existing slot

                            // Sum people from all other regular bookings that overlap this specific 30-min segment
                            bookedSlots.forEach(otherSlot => {
                                if (otherSlot !== existingSlot && otherSlot.date === dateString && otherSlot.type === 'regular') {
                                    const otherStart = new Date(`${otherSlot.date}T${formatTime(otherSlot.startHour)}:${formatTime(otherSlot.startMinute)}:00`);
                                    const otherEnd = new Date(otherStart.getTime() + otherSlot.durationMinutes * 60 * 1000);
                                    if (currentSegmentStart < otherEnd && segmentEnd > otherStart) {
                                        peopleInThis30MinSlot += otherSlot.people;
                                    }
                                }
                            });

                            if (peopleInThis30MinSlot + newPeople > CAPACITY_PER_SLOT) {
                                return false; // Capacity exceeded for this 30-min segment
                            }
                            currentSegmentStart = segmentEnd;
                        }
                    }
                }
            }
            return true; // No blocking overlaps or capacity issues found
        }


        // --- Calculation Functions ---

        /**
         * Calculates the total price for a regular booking.
         */
        function calculateRegularPrice() {
            const dateString = regularDateInput.value;
            const numPeople = parseInt(regularPeopleInput.value);
            const durationRadio = document.querySelector('input[name="regular-duration"]:checked');
            const durationMinutes = durationRadio ? parseInt(durationRadio.value) : 0;
            const selectedTimeSlot = regularTimeSlotSelect.value;

            if (!dateString || isNaN(numPeople) || numPeople < 1 || !durationMinutes || !selectedTimeSlot || !regularNameInput.value.trim() || !regularPhoneInput.value.trim() || !regularPhoneInput.checkValidity()) {
                regularTotalPriceSpan.textContent = '0';
                regularAvailabilityMessage.classList.add('hidden');
                bookRegularBtn.disabled = true;
                bookRegularBtn.classList.add('opacity-50', 'cursor-not-allowed');
                return;
            }

            const dayType = getDayType(dateString);
            const pricePerPerson = getBasePrice(durationMinutes, dayType);
            const totalPrice = pricePerPerson * numPeople;

            regularTotalPriceSpan.textContent = totalPrice;

            // Check availability for the selected slot and update message
            const [startHour, startMinute] = selectedTimeSlot.split(':').map(Number);
            const isAvailable = checkAvailability(dateString, startHour, startMinute, durationMinutes, numPeople, 'regular');

            if (!isAvailable) {
                regularAvailabilityMessage.textContent = "–≠—Ç–æ –≤—Ä–µ–º—è –∑–∞–Ω—è—Ç–æ –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞.";
                regularAvailabilityMessage.classList.remove('hidden');
                bookRegularBtn.disabled = true;
                bookRegularBtn.classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                regularAvailabilityMessage.classList.add('hidden');
                bookRegularBtn.disabled = false;
                bookRegularBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }

        /**
         * Calculates the total price for a birthday booking.
         */
        function calculateBirthdayPrice() {
            const dateString = birthdayDateInput.value;
            const numPeople = parseInt(birthdayPeopleInput.value);
            const startHour = parseInt(birthdayStartHourInput.value);
            const startMinute = parseInt(birthdayStartMinuteInput.value);
            const endHour = parseInt(birthdayEndHourInput.value);
            const endMinute = parseInt(birthdayEndMinuteInput.value);

            birthdayDurationMessage.classList.add('hidden');
            birthdayAvailabilityMessage.classList.add('hidden');
            bookBirthdayBtn.disabled = true;
            bookBirthdayBtn.classList.add('opacity-50', 'cursor-not-allowed');

            if (!dateString || isNaN(numPeople) || numPeople < 1 || isNaN(startHour) || isNaN(startMinute) || isNaN(endHour) || isNaN(endMinute) || !birthdayNameInput.value.trim() || !birthdayPhoneInput.value.trim() || !birthdayPhoneInput.checkValidity()) {
                birthdayTotalPriceSpan.textContent = '0';
                return;
            }

            const startTime = new Date(`${dateString}T${formatTime(startHour)}:${formatTime(startMinute)}:00`);
            const endTime = new Date(`${dateString}T${formatTime(endHour)}:${formatTime(endMinute)}:00`);

            if (endTime <= startTime) {
                birthdayDurationMessage.textContent = "–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–∑–∂–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞—á–∞–ª–∞.";
                birthdayDurationMessage.classList.remove('hidden');
                birthdayTotalPriceSpan.textContent = '0';
                return;
            }

            const durationMinutes = (endTime.getTime() - startTime.getTime()) / (1000 * 60);

            if (durationMinutes < 120) {
                birthdayDurationMessage.textContent = "–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –î–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è - 2 —á–∞—Å–∞ (120 –º–∏–Ω—É—Ç).";
                birthdayDurationMessage.classList.remove('hidden');
                birthdayTotalPriceSpan.textContent = '0';
                return;
            }

            if (durationMinutes % 30 !== 0) {
                birthdayDurationMessage.textContent = "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫—Ä–∞—Ç–Ω–∞ 30 –º–∏–Ω—É—Ç–∞–º.";
                birthdayDurationMessage.classList.remove('hidden');
                birthdayTotalPriceSpan.textContent = '0';
                return;
            }

            // Park operating hours: 9:00 to 22:00 (last booking ends by 22:00)
            const parkOpen = new Date(`${dateString}T09:00:00`);
            const parkClose = new Date(`${dateString}T22:00:00`); // Ensure end time is before 22:00

            if (startTime < parkOpen || endTime > parkClose) {
                birthdayDurationMessage.textContent = "–í—Ä–µ–º—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ —Ä–∞–º–∫–∞—Ö —Ä–∞–±–æ—Ç—ã –ø–∞—Ä–∫–∞ (9:00 - 22:00).";
                birthdayDurationMessage.classList.remove('hidden');
                birthdayTotalPriceSpan.textContent = '0';
                return;
            }


            const dayType = getDayType(dateString);
            const basePriceFor120Min = (dayType === 'weekend_holiday') ? 1000 : 800; // Price for 2 hours
            // Calculate price based on duration relative to 2 hours (120 minutes)
            const pricePerMinute = basePriceFor120Min / 120;
            const totalPrice = pricePerMinute * durationMinutes * numPeople;

            birthdayTotalPriceSpan.textContent = totalPrice.toFixed(0); // Round to nearest integer

            // Check availability for birthday booking
            const isAvailable = checkAvailability(dateString, startHour, startMinute, durationMinutes, numPeople, 'birthday');
            if (!isAvailable) {
                birthdayAvailabilityMessage.textContent = "–≠—Ç–æ –≤—Ä–µ–º—è –∑–∞–Ω—è—Ç–æ –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –î–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è.";
                birthdayAvailabilityMessage.classList.remove('hidden');
            } else {
                bookBirthdayBtn.disabled = false;
                bookBirthdayBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }

        /**
         * Calculates the total price for a group booking.
         */
        function calculateGroupPrice() {
            const dateString = groupDateInput.value;
            const numPeople = parseInt(groupPeopleInput.value);
            const durationMinutes = 60; // Fixed to 1 hour for group bookings
            const selectedTimeSlot = groupTimeSlotSelect.value;

            if (!dateString || isNaN(numPeople) || !selectedTimeSlot || !groupNameInput.value.trim() || !groupPhoneInput.value.trim() || !groupPhoneInput.checkValidity()) {
                groupTotalPriceSpan.textContent = '0';
                groupAvailabilityMessage.classList.add('hidden');
                bookGroupBtn.disabled = true;
                bookGroupBtn.classList.add('opacity-50', 'cursor-not-allowed');
                return;
            }

            if (numPeople < 15) {
                groupTotalPriceSpan.textContent = '0';
                groupAvailabilityMessage.textContent = "–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫ –¥–ª—è –≥—Ä—É–ø–ø—ã - 15.";
                groupAvailabilityMessage.classList.remove('hidden');
                bookGroupBtn.disabled = true;
                bookGroupBtn.classList.add('opacity-50', 'cursor-not-allowed');
                return;
            }

            const dayType = getDayType(dateString);
            const standardPricePerPerson = getBasePrice(durationMinutes, dayType);
            const discountedPricePerPerson = standardPricePerPerson - 50;
            const totalPrice = discountedPricePerPerson * numPeople;

            groupTotalPriceSpan.textContent = totalPrice;

            // Check availability for the selected slot and update message
            const [startHour, startMinute] = selectedTimeSlot.split(':').map(Number);
            const isAvailable = checkAvailability(dateString, startHour, startMinute, durationMinutes, numPeople, 'group');

            if (!isAvailable) {
                groupAvailabilityMessage.textContent = "–≠—Ç–æ –≤—Ä–µ–º—è –∑–∞–Ω—è—Ç–æ –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞.";
                groupAvailabilityMessage.classList.remove('hidden');
                bookGroupBtn.disabled = true;
                bookGroupBtn.classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                groupAvailabilityMessage.classList.add('hidden');
                bookGroupBtn.disabled = false;
                bookGroupBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }

        // --- Event Handlers ---

        /**
         * Handles tab switching.
         * @param {Event} event - The click event.
         */
        function handleTabClick(event) {
            tabButtons.forEach(button => {
                button.classList.remove('active', 'bg-purple-700', 'hover:bg-purple-800', 'text-white', 'shadow-md');
                button.classList.add('bg-gray-700', 'hover:bg-gray-600', 'text-gray-200');
            });
            event.target.classList.add('active', 'bg-purple-700', 'hover:bg-purple-800', 'text-white', 'shadow-md');
            event.target.classList.remove('bg-gray-700', 'hover:bg-gray-600', 'text-gray-200');

            bookingSections.forEach(section => section.classList.add('hidden'));
            document.getElementById(event.target.id.replace('tab-', '') + '-booking').classList.remove('hidden');

            // Trigger initial calculation/population for the active tab
            if (event.target.id === 'tab-regular') {
                populateRegularTimeSlots();
                calculateRegularPrice();
            } else if (event.target.id === 'tab-birthday') {
                calculateBirthdayPrice();
            } else if (event.target.id === 'tab-group') {
                populateGroupTimeSlots();
                calculateGroupPrice();
            }
        }

        /**
         * Handles booking for regular visits.
         */
        function handleBookRegular() {
            const name = regularNameInput.value.trim();
            const phone = regularPhoneInput.value.trim();
            const dateString = regularDateInput.value;
            const numPeople = parseInt(regularPeopleInput.value);
            const durationRadio = document.querySelector('input[name="regular-duration"]:checked');
            const durationMinutes = durationRadio ? parseInt(durationRadio.value) : 0;
            const selectedTimeSlot = regularTimeSlotSelect.value;
            const totalPrice = regularTotalPriceSpan.textContent;

            if (!name || !phone || !dateString || !numPeople || !durationMinutes || !selectedTimeSlot) {
                showMessageBox("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.");
                return;
            }
            if (!regularPhoneInput.checkValidity()) {
                showMessageBox("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ +7XXXXXXXXXX.");
                return;
            }

            const [startHour, startMinute] = selectedTimeSlot.split(':').map(Number);

            const isAvailable = checkAvailability(dateString, startHour, startMinute, durationMinutes, numPeople, 'regular');

            if (isAvailable) {
                bookedSlots.push({
                    date: dateString,
                    startHour: startHour,
                    startMinute: startMinute,
                    durationMinutes: durationMinutes,
                    people: numPeople,
                    type: 'regular',
                    name: name,
                    phone: phone
                });
                const message = `<b>–ù–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (–†–∞–∑–æ–≤–æ–µ –ø–æ—Å–µ—â–µ–Ω–∏–µ):</b>\n` +
                                `–ò–º—è: ${name}\n` +
                                `–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}\n` +
                                `–î–∞—Ç–∞: ${dateString}\n` +
                                `–í—Ä–µ–º—è: ${selectedTimeSlot}\n` +
                                `–ß–µ–ª–æ–≤–µ–∫: ${numPeople}\n` +
                                `–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ${durationMinutes} –º–∏–Ω\n` +
                                `–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ${totalPrice} ‚ÇΩ`;
                sendTelegramMessage(message);
                showMessageBox(`–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ! –î–∞—Ç–∞: ${dateString}, –í—Ä–µ–º—è: ${selectedTimeSlot}, –ß–µ–ª–æ–≤–µ–∫: ${numPeople}, –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ${durationMinutes} –º–∏–Ω. –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ${totalPrice} ‚ÇΩ`);
                // Re-populate time slots to reflect new booking
                populateRegularTimeSlots();
                calculateRegularPrice(); // Recalculate price and availability
            } else {
                showMessageBox("–ò–∑–≤–∏–Ω–∏—Ç–µ, –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∑–∞–Ω—è—Ç–æ –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è.");
            }
        }

        /**
         * Handles booking for birthdays.
         */
        function handleBookBirthday() {
            const name = birthdayNameInput.value.trim();
            const phone = birthdayPhoneInput.value.trim();
            const dateString = birthdayDateInput.value;
            const numPeople = parseInt(birthdayPeopleInput.value);
            const startHour = parseInt(birthdayStartHourInput.value);
            const startMinute = parseInt(birthdayStartMinuteInput.value);
            const endHour = parseInt(birthdayEndHourInput.value);
            const endMinute = parseInt(birthdayEndMinuteInput.value);
            const totalPrice = birthdayTotalPriceSpan.textContent;

            if (!name || !phone || !dateString || !numPeople || isNaN(startHour) || isNaN(startMinute) || isNaN(endHour) || isNaN(endMinute)) {
                showMessageBox("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –î–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è.");
                return;
            }
            if (!birthdayPhoneInput.checkValidity()) {
                showMessageBox("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ +7XXXXXXXXXX.");
                return;
            }

            const startTime = new Date(`${dateString}T${formatTime(startHour)}:${formatTime(startMinute)}:00`);
            const endTime = new Date(`${dateString}T${formatTime(endHour)}:${formatTime(endMinute)}:00`);
            const durationMinutes = (endTime.getTime() - startTime.getTime()) / (1000 * 60);

            if (durationMinutes < 120) {
                showMessageBox("–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –î–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è - 2 —á–∞—Å–∞ (120 –º–∏–Ω—É—Ç).");
                return;
            }
            if (durationMinutes % 30 !== 0) {
                showMessageBox("–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫—Ä–∞—Ç–Ω–∞ 30 –º–∏–Ω—É—Ç–∞–º.");
                return;
            }

            const isAvailable = checkAvailability(dateString, startHour, startMinute, durationMinutes, numPeople, 'birthday');

            if (isAvailable) {
                bookedSlots.push({
                    date: dateString,
                    startHour: startHour,
                    startMinute: startMinute,
                    durationMinutes: durationMinutes,
                    people: numPeople,
                    type: 'birthday',
                    name: name,
                    phone: phone
                });
                const message = `<b>–ù–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è):</b>\n` +
                                `–ò–º—è: ${name}\n` +
                                `–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}\n` +
                                `–î–∞—Ç–∞: ${dateString}\n` +
                                `–í—Ä–µ–º—è: ${formatTime(startHour)}:${formatTime(startMinute)} - ${formatTime(endHour)}}:${formatTime(endMinute)}\n` +
                                `–ß–µ–ª–æ–≤–µ–∫: ${numPeople}\n` +
                                `–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ${durationMinutes} –º–∏–Ω\n` +
                                `–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ${totalPrice} ‚ÇΩ`;
                sendTelegramMessage(message);
                showMessageBox(`–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –î–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ! –î–∞—Ç–∞: ${dateString}, –í—Ä–µ–º—è: ${formatTime(startHour)}:${formatTime(startMinute)} - ${formatTime(endHour)}:${formatTime(endMinute)}, –ß–µ–ª–æ–≤–µ–∫: ${numPeople}. –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ${totalPrice} ‚ÇΩ`);
                calculateBirthdayPrice(); // Recalculate price and availability
            } else {
                showMessageBox("–ò–∑–≤–∏–Ω–∏—Ç–µ, –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∑–∞–Ω—è—Ç–æ –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –î–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è.");
            }
        }

        /**
         * Handles booking for groups.
         */
        function handleBookGroup() {
            const name = groupNameInput.value.trim();
            const phone = groupPhoneInput.value.trim();
            const dateString = groupDateInput.value;
            const numPeople = parseInt(groupPeopleInput.value);
            const durationMinutes = 60; // Fixed for group
            const selectedTimeSlot = groupTimeSlotSelect.value;
            const totalPrice = groupTotalPriceSpan.textContent;

            if (!name || !phone || !dateString || !numPeople || !selectedTimeSlot) {
                showMessageBox("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –¥–ª—è –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.");
                return;
            }
            if (!groupPhoneInput.checkValidity()) {
                showMessageBox("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ +7XXXXXXXXXX.");
                return;
            }

            if (numPeople < 15) {
                showMessageBox("–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫ –¥–ª—è –≥—Ä—É–ø–ø—ã - 15.");
                return;
            }

            const [startHour, startMinute] = selectedTimeSlot.split(':').map(Number);

            const isAvailable = checkAvailability(dateString, startHour, startMinute, durationMinutes, numPeople, 'group');

            if (isAvailable) {
                bookedSlots.push({
                    date: dateString,
                    startHour: startHour,
                    startMinute: startMinute,
                    durationMinutes: durationMinutes,
                    people: numPeople,
                    type: 'group',
                    name: name,
                    phone: phone
                });
                const message = `<b>–ù–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (–ì—Ä—É–ø–ø–∞):</b>\n` +
                                `–ò–º—è: ${name}\n` +
                                `–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}\n` +
                                `–î–∞—Ç–∞: ${dateString}\n` +
                                `–í—Ä–µ–º—è: ${selectedTimeSlot}\n` +
                                `–ß–µ–ª–æ–≤–µ–∫: ${numPeople}\n` +
                                `–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ${durationMinutes} –º–∏–Ω\n` +
                                `–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ${totalPrice} ‚ÇΩ`;
                sendTelegramMessage(message);
                showMessageBox(`–ì—Ä—É–ø–ø–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ! –î–∞—Ç–∞: ${dateString}, –í—Ä–µ–º—è: ${selectedTimeSlot}, –ß–µ–ª–æ–≤–µ–∫: ${numPeople}. –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ${totalPrice} ‚ÇΩ`);
                populateGroupTimeSlots();
                calculateGroupPrice(); // Recalculate price and availability
            } else {
                showMessageBox("–ò–∑–≤–∏–Ω–∏—Ç–µ, –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∑–∞–Ω—è—Ç–æ –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –¥–ª—è –≤–∞—à–µ–π –≥—Ä—É–ø–ø—ã.");
            }
        }

        /**
         * Populates time slots for regular booking based on current selections.
         */
        function populateRegularTimeSlots() {
            const dateString = regularDateInput.value;
            const durationRadio = document.querySelector('input[name="regular-duration"]:checked');
            const durationMinutes = durationRadio ? parseInt(durationRadio.value) : 0;
            const numPeople = parseInt(regularPeopleInput.value);
            if (dateString && numPeople && durationMinutes) {
                populateTimeSlots(regularTimeSlotSelect, dateString, durationMinutes, numPeople, 'regular');
            } else {
                regularTimeSlotSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫ –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</option>';
            }
        }

         /**
         * Populates time slots for group booking based on current selections.
         */
        function populateGroupTimeSlots() {
            const dateString = groupDateInput.value;
            const numPeople = parseInt(groupPeopleInput.value);
            const durationMinutes = 60; // Fixed for group bookings
            if (dateString && numPeople >= 15) {
                populateTimeSlots(groupTimeSlotSelect, dateString, durationMinutes, numPeople, 'group');
            } else {
                groupTimeSlotSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–ª–æ–≤–µ–∫ (–æ—Ç 15)</option>';
            }
        }

        // --- Cube Generation Function ---
        function createCubes() {
            const colors = ['bg-fuchsia-500', 'bg-cyan-400', 'bg-purple-500', 'bg-pink-500', 'bg-blue-500'];
            const numCubes = 50; // Number of cubes to generate

            for (let i = 0; i < numCubes; i++) {
                const cube = document.createElement('div');
                cube.classList.add('cube');

                // Random size (small cubes)
                const size = Math.random() * 8 + 2; // Size between 2px and 10px
                cube.style.width = `${size}px`;
                cube.style.height = `${size}px`;

                // Random position
                cube.style.top = `${Math.random() * 100}%`;
                cube.style.left = `${Math.random() * 100}%`;

                // Random color
                cube.classList.add(colors[Math.floor(Math.random() * colors.length)]);

                // Random animation delay for staggered effect
                cube.style.animationDelay = `${Math.random() * 3}s`; // Delay up to 3 seconds

                cubesContainer.appendChild(cube);
            }
        }

        // --- Bot Logic (from bot.js) ---
        console.log('Gemini Bot –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω');

        // Function to simulate bot response
        function handleBotCommand(command) {
            let response = '';
            switch (command) {
                case '1':
                    response = '–î–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º—É –≤—ã—à–µ, –≤—ã–±—Ä–∞–≤ –Ω—É–∂–Ω—ã–π —Ç–∏–ø –ø–æ—Å–µ—â–µ–Ω–∏—è (—Ä–∞–∑–æ–≤–æ–µ, –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è, –≥—Ä—É–ø–ø–æ–≤–æ–µ).';
                    // Optionally, you could also scroll to the booking section:
                    // document.getElementById('tab-regular').click(); // Activate regular booking tab
                    // window.scrollTo({ top: document.getElementById('regular-booking').offsetTop, behavior: 'smooth' });
                    break;
                case '2':
                    response = '–ù–∞—à–∏ —Ü–µ–Ω—ã:\n' +
                               '–†–∞–∑–æ–≤–æ–µ –ø–æ—Å–µ—â–µ–Ω–∏–µ (1 —á–µ–ª.):\n' +
                               '- –ü–ù/–ß–¢: 30 –º–∏–Ω - 300‚ÇΩ, 60 –º–∏–Ω - 350‚ÇΩ, 120 –º–∏–Ω - 700‚ÇΩ\n' +
                               '- –í–¢/–°–†/–ü–¢: 30 –º–∏–Ω - 300‚ÇΩ, 60 –º–∏–Ω - 500‚ÇΩ, 120 –º–∏–Ω - 800‚ÇΩ\n' +
                               '- –í—ã—Ö–æ–¥–Ω—ã–µ/–ü—Ä–∞–∑–¥–Ω–∏–∫–∏: 30 –º–∏–Ω - 400‚ÇΩ, 60 –º–∏–Ω - 600‚ÇΩ, 120 –º–∏–Ω - 1000‚ÇΩ\n\n' +
                               '–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è: –æ—Ç 2-—Ö —á–∞—Å–æ–≤, —Ü–µ–Ω–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —á–µ–ª–æ–≤–µ–∫ –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å 120 –º–∏–Ω—É—Ç.\n\n' +
                               '–ì—Ä—É–ø–ø–æ–≤—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –µ—Å–ª–∏ (–æ—Ç 15 —á–µ–ª.):  —Ç–æ —Å–∫–∏–¥–∫–∞ 50‚ÇΩ —Å —á–µ–ª–æ–≤–µ–∫–∞ –∑–∞ 1 —á–∞—Å. ' +
                               '–ê–∫—Ü–∏–∏: –°–ª–µ–¥–∏—Ç–µ –∑–∞ –Ω–∞—à–∏–º–∏ –Ω–æ–≤–æ—Å—Ç—è–º–∏ –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö instagram: cosmos.bud –∏ –Ω–∞ —Å–∞–π—Ç–µ –¥–ª—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∞–∫—Ü–∏–π!';
                    break;
                case '3':
                    response = '–ú—ã –Ω–∞—Ö–æ–¥–∏–º—Å—è –ø–æ –∞–¥—Ä–µ—Å—É: —É–ª. –ª–µ–Ω–∏–Ω–∏–Ω—Å–∫–∞—è, –¥. 82, –≥. –ë—É–¥–µ–Ω–Ω–æ–≤—Å–∫. –î–æ–±—Ä–∞—Ç—å—Å—è –º–æ–∂–Ω–æ –Ω–∞ –ª—é–±–æ–º –∞–≤—Ç–æ–±—É—Å–µ, –¥–æ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ "–≥–æ—Å—Ç–∏–Ω–∏—Ü–∞", –∏–ª–∏ –Ω–∞ —Ç–∞–∫—Å–∏  –¥–æ  "–ö–æ—Å–º–æ—Å". –î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –∫–∞—Ä—Ç–æ–π –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ.';
                    break;
                case '4':
                    const jokes = [
                        '–ü–æ—á–µ–º—É –∫–æ—Å–º–æ–Ω–∞–≤—Ç—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—ã–≤–∞—é—Ç –≥–æ–ª–æ–¥–Ω—ã–º–∏ –≤ –∫–æ—Å–º–æ—Å–µ? –ü–æ—Ç–æ–º—É —á—Ç–æ —É –Ω–∏—Ö –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å –∑–≤–µ–∑–¥—ã –Ω–∞ —É–∂–∏–Ω!',
                        '–ß—Ç–æ —Å–∫–∞–∑–∞–ª –æ–¥–∏–Ω –±–∞—Ç—É—Ç –¥—Ä—É–≥–æ–º—É –±–∞—Ç—É—Ç—É? "–ú—ã –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å –≤—Å—Ç—Ä–µ—Ç–∏–º—Å—è —Å–≤–µ—Ä—Ö—É!"',
                        '–ö–∞–∫ –∑–æ–≤—É—Ç –±–∞—Ç—É—Ç, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç –ø–µ—Ç—å? –¢—Ä–∞–º–ø–æ–ª–∏–Ω–∫–∞!',
                        '–ü–æ—á–µ–º—É –±–∞—Ç—É—Ç –Ω–µ –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã? –ü–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –≤—Å–µ–≥–¥–∞ –≤—Å–µ –æ—Ç–ø—Ä—É–∂–∏–Ω–∏–≤–∞–µ—Ç!',
                        '–õ–µ—Ç–∏—Ç –∫–æ—Å–º–æ–Ω–∞–≤—Ç –≤ –∫–æ—Å–º–æ—Å–µ, –≤–∏–¥–∏—Ç –Ω–∞–¥–ø–∏—Å—å: "–û—Å—Ç–æ—Ä–æ–∂–Ω–æ, –±–∞—Ç—É—Ç!" –û–Ω —Å–º–µ–µ—Ç—Å—è, –¥—É–º–∞–µ—Ç, –∫—Ç–æ –≤ –∫–æ—Å–º–æ—Å–µ –±–∞—Ç—É—Ç—ã —Å—Ç–∞–≤–∏—Ç? –ü—Ä—ã–≥–∞–µ—Ç, –∏ —Ç—É—Ç –∂–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ –ó–µ–º–ª—é!'
                    ];
                    response = jokes[Math.floor(Math.random() * jokes.length)];
                    break;
                case '5':
                    const factsOrTricks = [
                        '–§–∞–∫—Ç: –ë–∞—Ç—É—Ç—ã –∏–∑–æ–±—Ä–µ–ª–∏ —ç—Å–∫–∏–º–æ—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è. (–≠—Ç–æ –Ω–µ–ø—Ä–∞–≤–¥–∞, –Ω–æ –∑–≤—É—á–∏—Ç –∫–∞–∫ —Ö–æ—Ä–æ—à–∏–π —Ç—Ä—é–∫!)',
                        '–¢—Ä—é–∫: –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–¥–µ–ª–∞—Ç—å "–∫–æ—Å–º–∏—á–µ—Å–∫–æ–µ —Å–∞–ª—å—Ç–æ" ‚Äì —ç—Ç–æ –∫–æ–≥–¥–∞ –≤—ã –ø–æ–¥–ø—Ä—ã–≥–∏–≤–∞–µ—Ç–µ –∏ –¥–µ–ª–∞–µ—Ç–µ —Å–∞–ª—å—Ç–æ, –∞ –∑–∞—Ç–µ–º –ø—Ä–∏–∑–µ–º–ª—è–µ—Ç–µ—Å—å, –Ω–µ –∫–∞—Å–∞—è—Å—å —Ä—É–∫–∞–º–∏ –ø–æ–ª–∞!',
                        '–§–∞–∫—Ç: –°–∞–º—ã–π –≤—ã—Å–æ–∫–∏–π –ø—Ä—ã–∂–æ–∫ –Ω–∞ –±–∞—Ç—É—Ç–µ –±—ã–ª –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –Ω–∞ –≤—ã—Å–æ—Ç–µ 6.7 –º–µ—Ç—Ä–æ–≤.',
                        '–¢—Ä—é–∫: –ü–æ–ø—Ä–æ–±—É–π—Ç–µ "–∑–≤–µ–∑–¥–Ω—É—é –ø–æ–∑—É" ‚Äì –≤ –≤—ã—Å—à–µ–π —Ç–æ—á–∫–µ –ø—Ä—ã–∂–∫–∞ –≤—ã—Ç—è–≥–∏–≤–∞–π—Ç–µ —Ä—É–∫–∏ –∏ –Ω–æ–≥–∏ –≤ —Å—Ç–æ—Ä–æ–Ω—ã, –∫–∞–∫ –∑–≤–µ–∑–¥–∞!',
                        '–§–∞–∫—Ç: –ü–µ—Ä–≤—ã–π –±–∞—Ç—É—Ç –±—ã–ª —Å–æ–∑–¥–∞–Ω –î–∂–æ—Ä–¥–∂–µ–º –ù–∏—Å—Å–µ–Ω–æ–º –≤ 1936 –≥–æ–¥—É.',
                        '–¢—Ä—é–∫: –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –ø–æ–∫–∞–∑–∞—Ç—å –≤–∞–º "–ª—É–Ω–Ω—É—é –ø—Ä–æ–≥—É–ª–∫—É" –Ω–∞ –±–∞—Ç—É—Ç–µ!'
                    ];
                    response = factsOrTricks[Math.floor(Math.random() * factsOrTricks.length)];
                    break;
                case '6':
                    response = '–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞: –ß—Ç–æ–±—ã —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –∏–¥–µ–∞–ª—å–Ω—É—é –≤—ã—Å–æ—Ç—É –ø—Ä—ã–∂–∫–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º—É–ª—É: H = V_0^2 / (2g)$, –≥–¥–µ H - –≤—ã—Å–æ—Ç–∞, V_0 - –Ω–∞—á–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å, g - —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –ø–∞–¥–µ–Ω–∏—è (~9.8 –º/—Å^2). –ù–æ –ª—É—á—à–µ –ø—Ä–æ—Å—Ç–æ –ø—Ä—ã–≥–∞–π—Ç–µ –∏ –≤–µ—Å–µ–ª–∏—Ç–µ—Å—å –≤ –Ω–∞—à–µ–º –ö–æ—Å–º–æ—Å–µüôÉ!';
                    break;
                case '7':
                    response = '–í–∏–∫—Ç–æ—Ä–∏–Ω–∞! –ü–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å: –ö–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –≥–∞–ª–∞–∫—Ç–∏–∫–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞—à–∞ –°–æ–ª–Ω–µ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞? (–ù–∞–ø–∏—à–∏—Ç–µ –æ—Ç–≤–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–∑!)';
                    break;
                case '8':
                    response = '–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –∏ –º—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏, –ª–∏–±–æ –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º –Ω–∞ –ø–æ—á—Ç—É: admin@cosmos.ru –∏–ª–∏ –ø–æ–∑–≤–æ–Ω–∏—Ç–µ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É: +79197304111.';
                    // In a real application, you might direct them to a contact form or a specific chat link.
                    break;
                case '9':
                    response = '–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –æ—Ç–∑—ã–≤! –í—ã –º–æ–∂–µ—Ç–µ –æ—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ –Ω–∞ –Ω–∞—à–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤ VK, Google Maps, Yandex Maps, –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–º –Ω–∞ –ø–æ—á—Ç—É: feedback@cosmos.ru. –ú—ã —Ü–µ–Ω–∏–º –≤–∞—à–µ –º–Ω–µ–Ω–∏–µ!';
                    break;
                default:
                    response = '–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ –ø–æ–Ω—è–ª –∫–æ–º–∞–Ω–¥—É. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é (1-9).';
            }
            showMessageBox(response);
        }

        // --- Initial Setup and Event Listeners ---
        document.addEventListener('DOMContentLoaded', () => {
            // Set today's date as default and minimum date
            const today = new Date();
            const todayString = today.toISOString().split('T')[0];
            regularDateInput.value = todayString;
            regularDateInput.min = todayString;
            birthdayDateInput.value = todayString;
            birthdayDateInput.min = todayString;
            groupDateInput.value = todayString;
            groupDateInput.min = todayString;

            // Initial population and calculation for the default tab
            populateRegularTimeSlots();
            calculateRegularPrice();

            // Tab navigation listeners
            tabButtons.forEach(button => {
                button.addEventListener('click', handleTabClick);
            });

            // Regular Booking Listeners
            regularNameInput.addEventListener('input', calculateRegularPrice);
            regularPhoneInput.addEventListener('input', calculateRegularPrice);
            regularMinusBtn.addEventListener('click', () => {
                let val = parseInt(regularPeopleInput.value);
                if (val > 1) regularPeopleInput.value = val - 1;
                populateRegularTimeSlots();
                calculateRegularPrice();
            });
            regularPlusBtn.addEventListener('click', () => {
                let val = parseInt(regularPeopleInput.value);
                if (val < 20) regularPeopleInput.value = val + 1;
                populateRegularTimeSlots();
                calculateRegularPrice();
            });
            regularPeopleInput.addEventListener('input', () => {
                let val = parseInt(regularPeopleInput.value);
                if (isNaN(val) || val < 1) regularPeopleInput.value = 1;
                if (val > 20) regularPeopleInput.value = 20;
                populateRegularTimeSlots();
                calculateRegularPrice();
            });
            regularDateInput.addEventListener('change', () => {
                populateRegularTimeSlots();
                calculateRegularPrice();
            });
            regularDurationRadios.forEach(radio => {
                radio.addEventListener('change', () => {
                    populateRegularTimeSlots();
                    calculateRegularPrice();
                });
            });
            regularTimeSlotSelect.addEventListener('change', calculateRegularPrice);
            bookRegularBtn.addEventListener('click', handleBookRegular);

            // Birthday Booking Listeners
            birthdayNameInput.addEventListener('input', calculateBirthdayPrice);
            birthdayPhoneInput.addEventListener('input', calculateBirthdayPrice);
            birthdayMinusBtn.addEventListener('click', () => {
                let val = parseInt(birthdayPeopleInput.value);
                if (val > 1) birthdayPeopleInput.value = val - 1;
                calculateBirthdayPrice();
            });
            birthdayPlusBtn.addEventListener('click', () => {
                let val = parseInt(birthdayPeopleInput.value);
                if (val < 20) birthdayPeopleInput.value = val + 1;
                calculateBirthdayPrice();
            });
            birthdayPeopleInput.addEventListener('input', () => {
                let val = parseInt(birthdayPeopleInput.value);
                if (isNaN(val) || val < 1) birthdayPeopleInput.value = 1;
                if (val > 20) birthdayPeopleInput.value = 20;
                calculateBirthdayPrice();
            });
            birthdayDateInput.addEventListener('change', calculateBirthdayPrice);
            birthdayStartHourInput.addEventListener('input', calculateBirthdayPrice);
            birthdayStartMinuteInput.addEventListener('input', () => {
                let val = parseInt(birthdayStartMinuteInput.value);
                if (isNaN(val) || val < 0) birthdayStartMinuteInput.value = 0;
                if (val > 59) birthdayStartMinuteInput.value = 59;
                birthdayStartMinuteInput.value = (Math.round(val / 30) * 30).toString().padStart(2, '0'); // Snap to 00 or 30, format as "00"
                calculateBirthdayPrice();
            });
            birthdayEndHourInput.addEventListener('input', calculateBirthdayPrice);
            birthdayEndMinuteInput.addEventListener('input', () => {
                let val = parseInt(birthdayEndMinuteInput.value);
                if (isNaN(val) || val < 0) birthdayEndMinuteInput.value = 0;
                if (val > 59) birthdayEndMinuteInput.value = 59;
                birthdayEndMinuteInput.value = (Math.round(val / 30) * 30).toString().padStart(2, '0'); // Snap to 00 or 30, format as "00"
                calculateBirthdayPrice();
            });
            bookBirthdayBtn.addEventListener('click', handleBookBirthday);

            // Group Booking Listeners
            groupNameInput.addEventListener('input', calculateGroupPrice);
            groupPhoneInput.addEventListener('input', calculateGroupPrice);
            groupMinusBtn.addEventListener('click', () => {
                let val = parseInt(groupPeopleInput.value);
                if (val > 15) groupPeopleInput.value = val - 1;
                populateGroupTimeSlots();
                calculateGroupPrice();
            });
            groupPlusBtn.addEventListener('click', () => {
                let val = parseInt(groupPeopleInput.value);
                if (val < 100) groupPeopleInput.value = val + 1; // Max 100 for group
                populateGroupTimeSlots();
                calculateGroupPrice();
            });
            groupPeopleInput.addEventListener('input', () => {
                let val = parseInt(groupPeopleInput.value);
                if (isNaN(val) || val < 15) groupPeopleInput.value = 15;
                if (val > 100) groupPeopleInput.value = 100;
                populateGroupTimeSlots();
                calculateGroupPrice();
            });
            groupDateInput.addEventListener('change', () => {
                populateGroupTimeSlots();
                calculateGroupPrice();
            });
            groupTimeSlotSelect.addEventListener('change', calculateGroupPrice);
            bookGroupBtn.addEventListener('click', handleBookGroup);

            // Message Box Listener
            messageOkButton.addEventListener('click', hideMessageBox);

            // Generate cubes on page load
            createCubes();

            // Bot menu option listeners
            botOption1.addEventListener('click', () => handleBotCommand('1'));
            botOption2.addEventListener('click', () => handleBotCommand('2'));
            botOption3.addEventListener('click', () => handleBotCommand('3'));
            botOption4.addEventListener('click', () => handleBotCommand('4'));
            botOption5.addEventListener('click', () => handleBotCommand('5'));
            botOption6.addEventListener('click', () => handleBotCommand('6'));
            botOption7.addEventListener('click', () => handleBotCommand('7'));
            botOption8.addEventListener('click', () => handleBotCommand('8'));
            botOption9.addEventListener('click', () => handleBotCommand('9'));
        });
    </script>
</body>
</html>
